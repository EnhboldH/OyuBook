{% extends "ctf/layout.html" %}
{% block stylesheets %}
<link href="{{ url_for('static', filename='css/ctf/ctf-admin.css') }}" rel="stylesheet">
{% endblock %}
{% block content %}
<section id="main" class="d-flex align-items-center bg-dark">
  <div class="container-fluid">
    <div class="row justify-content-center">
      <h1>Админ - {{ current_user.username.capitalize() }}</h1>
    </div>
  </div>
</section>
<div class="container mt-5">
  <div class="row">
    <div class="col-3">
      <div class="nav flex-column nav-pills" role="tablist" aria-orientation="vertical">
        <a class="nav-link active" id="all-users-tab" data-toggle="pill" href="#all-users" role="tab"
          aria-controls="all-users" aria-selected="true">
          Хэрэглэгчид
        </a>
        <a class="nav-link" id="all-challenges-tab" data-toggle="pill" href="#all-challenges" role="tab"
          aria-controls="all-challenges" aria-selected="false">
          Нийт бодлогууд
        </a>
        <a class="nav-link" id="challenges-add-tab" data-toggle="pill" href="#challenges-add" role="tab"
          aria-controls="challenges-add" aria-selected="false">
          Бодлого нэмэх
        </a>
        <a class="nav-link" id="challenges-request-tab" data-toggle="pill" href="#challenges-request" role="tab"
          aria-controls="challenges-request" aria-selected="false">
          Хүлээгдэж буй бодлогууд
        </a>
      </div>
    </div>
    <div class="col-9">
      <div class="tab-content">
        <div class="tab-pane fade show active" id="all-users" role="tabpanel" aria-labelledby="all-users-tab">
          <table class="table table-striped table-dark">
            <thead>
              <tr>
                <th scope="col">ID</th>
                <th scope="col">Нэр</th>
                <th scope="col">CTF Оноо</th>
                <th scope="col">Түвшин</th>
              </tr>
            </thead>
            <tbody>
              {% for user in fields.users %}
              <tr>
                <th scope="row">{{ user.id }}</th>
                <td><a href="{{ url_for('users.profile', username=user.username) }}">{{ user.username }}</a></td>
                <td>{{ user.ctf_point }}</td>
                <td>{{ user.level }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        <div class="tab-pane fade" id="all-challenges" role="tabpanel" aria-labelledby="all-challenges-tab">
          <table class="table table-striped table-dark">
            <thead>
              <tr>
                <th scope="col">ID</th>
                <th scope="col">Нэр</th>
                <th scope="col">Оноо</th>
                <th scope="col">Төрөл</th>
                <th scope="col">Засах</th>
              </tr>
            </thead>
            <tbody>
              {% for challenge in fields.challenges %}
              <tr>
                <th scope="row">{{ challenge.id }}</th>
                <td><a href="{{ url_for('users.profile', username=challenge.author_name) }}">{{ challenge.name }}</a>
                </td>
                <td>{{ challenge.value }}</td>
                <td>{{ challenge.category }}</td>
                <td>
                  <a href="{{ url_for('ctf.admin', action_type='challenge-delete', challenge_id=challenge.id) }}"><i
                      class="fa fa-times-circle" aria-hidden="true" id="delete"></i></a>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        <div class="tab-pane fade" id="challenges-add" role="tabpanel" aria-labelledby="challenges-add-tab">
        </div>
        <div class="tab-pane fade" id="challenges-request" role="tabpanel" aria-labelledby="challenges-request-tab">
          <table class="table table-striped table-dark">
            <thead>
              <tr>
                <th scope="col">ID</th>
                <th scope="col">Нэр</th>
                <th scope="col">Оноо</th>
                <th scope="col">Зохиогч</th>
                <th scope="col">Төлөв</th>
                <th scope="col">Засах</th>
              </tr>
            </thead>
            <tbody>
              {% for challenge in fields.requested_challenges %}
              <tr>
                <th scope="row">{{ challenge.id }}</th>
                <td>{{ challenge.name }}</td>
                <td>{{ challenge.value }}</td>
                <td><a href="{{ url_for('users.profile', username=author_name) }}">{{ challenge.author_name }}</a></td>
                {% if challenge.state == 'waiting' %}
                <td>Хүлээгдэж буй</td>
                {% endif %}
                <td>
                  <a href="{{ url_for('ctf.admin', action_type='request-delete', challenge_id=challenge.id) }}"><i
                      class="fa fa-times-circle" aria-hidden="true" id="delete"></i></a>
                  <a href="{{ url_for('ctf.admin', action_type='request-accept', challenge_id=challenge.id) }}"><i
                      class="fa fa-check-circle" aria-hidden="true" id="add"></i></a>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}
{% block scripts %}
{% endblock %}